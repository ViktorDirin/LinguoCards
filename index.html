<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinguoCards</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        ::-webkit-scrollbar-thumb {
            background: #4a4a4a;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #3b82f6;
        }

        /* Firefox */
        * {
            scrollbar-width: thin;
            scrollbar-color: #4a4a4a #1a1a1a;
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- Home Screen -->
        <div id="home-screen" class="screen active">
            <!-- Settings Icon (Top Right) -->
            <!-- Settings Icon (Top Right) -->
            <!-- Icon moved to header flex container -->

            <!-- Settings Modal -->
            <div id="settings-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header" style="justify-content: center;">
                        <h2>Settings</h2>
                    </div>
                    <div class="modal-body">
                        <!-- PWA Actions -->
                        <button id="install-app-btn" class="hidden"
                            style="width: 100%; padding: 0.75rem 1rem; background-color: #2563eb; color: white; border-radius: 0.5rem; font-weight: 500; margin-bottom: 1rem; border: none; cursor: pointer; transition: background-color 0.2s;">
                            Install App
                        </button>

                        <button id="check-update-btn"
                            style="width: 100%; padding: 0.75rem 1rem; background-color: #334155; color: #e2e8f0; border-radius: 0.5rem; font-weight: 500; border: none; cursor: pointer; transition: background-color 0.2s; margin-bottom: 1rem;">
                            Check for Updates
                        </button>

                        <!-- Debug Info -->
                        <div
                            style="color: #64748b; font-size: 0.75rem; text-transform: uppercase; margin-top: 1rem; margin-bottom: 0.5rem;">
                            Debug Info
                        </div>
                        <div id="debug-info-log"
                            style="background-color: rgba(2, 6, 23, 0.5); border: 1px solid #1e293b; border-radius: 0.25rem; padding: 0.75rem; font-size: 0.75rem; font-family: monospace; color: #10b981; word-break: break-all; min-height: 60px; margin-bottom: 1.5rem;">
                            Waiting for speech trigger...
                        </div>

                        <div class="version-info"
                            style="text-align: center; margin-bottom: 1.5rem; color: #64748b; font-size: 0.8rem;">
                            v1.3.17
                        </div>

                        <!-- Close Button -->
                        <button id="close-settings-btn"
                            style="width: 100%; padding: 0.75rem 1rem; background-color: transparent; border: 1px solid #475569; color: #94a3b8; border-radius: 0.5rem; font-weight: 500; cursor: pointer; transition: all 0.2s;">
                            Close
                        </button>
                    </div>
                </div>
            </div>

            <!-- Rules Reference Modal -->
            <div id="rules-modal" class="modal hidden">
                <div class="modal-content">
                    <div class="modal-header" style="justify-content: center;">
                        <h2 style="color: #38bdf8;">Vietnamese Number Rules</h2>
                    </div>
                    <div class="modal-body" style="text-align: left; color: #cbd5e1; line-height: 1.6;">
                        <ul style="list-style-type: none; padding: 0;">
                            <li style="margin-bottom: 0.75rem;">‚Ä¢ <strong>15.</strong> Spoken as 'm∆∞·ªùi lƒÉm' (instead of
                                nƒÉm).</li>
                            <li style="margin-bottom: 0.75rem;">‚Ä¢ <strong>21, 31... 91.</strong> The '1' becomes 'm·ªët'
                                (instead of m·ªôt).</li>
                            <li style="margin-bottom: 0.75rem;">‚Ä¢ <strong>25, 35... 95.</strong> The '5' becomes 'lƒÉm'
                                (instead of nƒÉm).</li>
                            <li style="margin-bottom: 0.75rem;">‚Ä¢ <strong>24, 34... 94.</strong> Often '4' sounds like
                                't∆∞' (instead of b·ªën).</li>
                            <li style="margin-bottom: 0.75rem;">‚Ä¢ <strong>Tens.</strong> 10 is 'm∆∞·ªùi', but in compounds
                                (20, 30...) it is 'm∆∞∆°i'.</li>
                        </ul>
                        <!-- Close Button -->
                        <button id="close-rules-btn"
                            style="width: 100%; padding: 0.75rem 1rem; background-color: transparent; border: 1px solid #475569; color: #94a3b8; border-radius: 0.5rem; font-weight: 500; cursor: pointer; transition: all 0.2s; margin-top: 1rem;">
                            Close
                        </button>
                    </div>
                </div>
            </div>

            <div class="container">
                <div
                    style="display: flex; align-items: center; justify-content: center; gap: 1rem; margin-bottom: 1rem;">
                    <h1 style="margin: 0;">LinguoCards</h1>

                    <!-- Settings Icon (Flex Item) -->
                    <div style="cursor: pointer; color: #64748b; transition: color 0.2s;"
                        class="text-slate-500 hover:text-slate-300">
                        <svg id="settings-btn" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                    </div>
                </div>
                <p>Select a topic to start learning</p>

                <div id="topic-list" class="topic-grid">
                    <!-- Topics will be injected here -->
                </div>
            </div>
        </div>

        <!-- Learning Screen -->
        <div id="learning-screen" class="screen">
            <header style="display: flex; justify-content: center; align-items: center; width: 100%; height: 4rem;">
                <button id="back-home-btn" class="btn-menu"
                    style="position: fixed; top: 1rem; left: 1rem; z-index: 50;">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    Menu
                </button>
                <span id="progress-indicator">Card 1 of 11</span>
            </header>

            <main class="card-container">
                <div id="flashcard" class="card">
                    <div class="card-face card-front">
                        <button id="speak-btn" class="btn-speak" title="Listen">üîä</button>
                        <div class="card-content">
                            <span class="term-large" id="card-term">M·ªôt</span>
                            <span class="transcription-text" id="card-transcription">[Mot]</span>
                            <span class="category-tag">Numbers</span>
                        </div>
                    </div>
                    <div class="card-face card-back">
                        <div class="card-content">
                            <span class="translation-large" id="card-translation">One</span>
                        </div>
                    </div>
                </div>
            </main>

            <footer class="controls">
                <button id="prev-btn" class="btn-secondary" disabled>Previous</button>
                <button id="next-btn" class="btn-primary">Next</button>
            </footer>
        </div>

        <!-- Quiz Screen -->
        <div id="quiz-screen" class="screen">
            <header>
                <button id="quiz-back-btn" class="btn-text">‚Üê Exit Quiz</button>
                <span id="quiz-progress">Question 1/10</span>
            </header>

            <main class="quiz-container">
                <div class="question-area">
                    <h2 id="quiz-question" class="term-large">Question</h2>
                </div>

                <div id="quiz-options" class="options-grid">
                    <!-- Options will be injected here -->
                </div>
            </main>
        </div>
    </div>
    <script src="js/app.js"></script>
</body>

</html>